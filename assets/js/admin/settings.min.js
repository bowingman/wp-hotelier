jQuery(function($){"use strict";var HTL_Settings={init:function(){this.show_uploader();this.seasonal_dates_datepicker();this.add_seasonal_rule()},show_uploader:function(){var uploader_button=$(".htl-uploader");var field=uploader_button.prev();var file_frame;uploader_button.on("click",function(e){e.preventDefault();if(file_frame){file_frame.open();return}file_frame=wp.media.frames.file_frame=wp.media({states:[new wp.media.controller.Library({filterable:"all",multiple:false})]});file_frame.on("select",function(){var selection=file_frame.state().get("selection");var file_path="";selection.map(function(attachment){attachment=attachment.toJSON();if(attachment.url){file_path=attachment.url}});field.val(file_path)});file_frame.open()})},add_seasonal_rule:function(){$("#hotelier-seasonal-schema-table").on("htl_multi_text_before_clone_row",function(e){e.row.find(".htl-ui-input--start-date").datepicker("destroy").removeAttr("id");e.row.find(".htl-ui-input--end-date").datepicker("destroy").removeAttr("id")});$("#hotelier-seasonal-schema-table").on("htl_multi_text_after_add_row",function(){HTL_Settings.seasonal_dates_datepicker()})},seasonal_dates_datepicker:function(){var table=$("#hotelier-seasonal-schema-table");var from_inputs=table.find(".htl-ui-input--start-date");var to_inputs=table.find(".htl-ui-input--end-date");from_inputs.datepicker({dateFormat:"yy-mm-dd",minDate:0,changeMonth:true,onClose:function(){var date=$(this).datepicker("getDate");if(date){date.setDate(date.getDate()+1);$(this).closest("tr").find(".htl-ui-input--end-date").datepicker("option","minDate",date)}}});to_inputs.datepicker({dateFormat:"yy-mm-dd",minDate:1,changeMonth:true})}};$(document).ready(function(){HTL_Settings.init()})});
